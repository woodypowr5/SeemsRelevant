app.directive("draggable",["$document",function(o){return{link:function(e,n,p){function t(o){r=o.pageY-a,c=o.pageX-f,n.css({top:r+"px",left:c+"px"}),e.$emit("nodeMoved",i,c,r)}function u(){o.off("mousemove",t),o.off("mouseup",u)}var i=p.nodeid,s=e.nodes[i],f=s.xpos,a=s.ypos,c=0,r=0;n.css({position:"relative",cursor:"pointer"}),n.on("mousedown",function(e){e.preventDefault(),f=e.pageX-c,a=e.pageY-r,o.on("mousemove",t),o.on("mouseup",u)})}}}]);